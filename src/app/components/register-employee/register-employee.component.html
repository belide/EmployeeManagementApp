<div class="card card-body mb-3 text-center" style = "width: 75%">
  <h2> Register</h2>
  <form #registerForm="ngForm" (ngSubmit)="onRegisterSubmit(registerForm)">
      <div class="form-group row">
          <label class="col-sm-3 col-form-label"> Email Domain</label>
          <div class="col-sm-9">
          <input (focusout)="checkDomain()"
            type="text" autocomplete="off"
            [(ngModel)]="emailDomain" 
            [ngClass]="{'is-invalid':domain.errors && domain.touched}"
            class="form-control" 
            name="emailDomain"
            #domain="ngModel"
            required>
          <div [hidden]="!domain.errors?.required" class="invalid-feedback">
            if none is specified, then inmar.com is considered as default domain
          </div>
        </div>
        </div>

      <div class="form-group row">
          <label class="col-sm-3 col-form-label"> First Name</label>
          <div class="col-sm-9">
          <input 
            type="text" autocomplete="off"
            [(ngModel)]="firstName" 
            [ngClass]="{'is-invalid':fName.errors && fName.touched}"
            class="form-control" 
            name="firstName"
            #fName="ngModel"
            required>
          <div [hidden]="!fName.errors?.required" class="invalid-feedback">
            First Name is Required
          </div>
        </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-3 col-form-label"> Last Name</label>
            <div class="col-sm-9">
            <input 
              type="text" autocomplete="off"
              [(ngModel)]="lastName" 
              [ngClass]="{'is-invalid':lName.errors && lName.touched}"
              class="form-control" 
              name="lastName"
              #lName="ngModel"
              required>
            <div [hidden]="!lName.errors?.required" class="invalid-feedback">
              Last Name is Required
            </div>
          </div>
          </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"> Email</label>
      <div class="col-sm-9">
      <input 
        type="text" autocomplete="off" appEmailValidator = {{emailDomain}}
        [(ngModel)]="email" 
        [ngClass]="{'is-invalid':registeredEmail.errors && registeredEmail.touched}"
        class="form-control" 
        name="email"
        #registeredEmail="ngModel"
        required>
      <div [hidden]="!registeredEmail.errors?.required" class="invalid-feedback">
        Email is Required
      </div>

      <div [hidden]="!registeredEmail.errors?.emailDomainError" class="invalid-feedback">
          Email is invalid - Domain is not {{emailDomain}}
      </div>
    </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-3 col-form-label">Password</label>
      <div class="col-sm-9">
      <input type="password" autocomplete="off"
        [(ngModel)]="password" 
        [ngClass]="{'is-invalid':registeredPassword.errors && registeredPassword.touched}"
        class="form-control" 
        name="userPassword"
        #registeredPassword="ngModel"
        required
        pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}">

      <div [hidden]="!registeredPassword.errors?.required" class="invalid-feedback">
        Password Required
      </div>
      <div [hidden]="!registeredPassword.errors?.pattern" class="invalid-feedback">
          Password invalid. (Must have 1 lowercase, 1 uppercase, 1 number, 1 special character and 8 minimum characters)
        </div>
    </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-3 col-form-label"> Aadhaar Number</label>
        <div class="col-sm-9">
        <input 
          type="text" autocomplete="off"
          [(ngModel)]="aadhaar" 
          [ngClass]="{'is-invalid':aadhaarNumber.errors && aadhaarNumber.touched}"
          class="form-control" 
          name="aadhaarNumber"
          #aadhaarNumber="ngModel"
          required>
        <div [hidden]="!aadhaarNumber.errors?.required" class="invalid-feedback">
          Aadhaar Number is Required
        </div>
      </div>
      </div>
    <button [disabled]="!registerForm.form.valid" class="btn btn-primary mb-3">Register</button>
  </form>
</div>